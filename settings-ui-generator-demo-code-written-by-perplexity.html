<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Settings Dialog Generator Demo</title>
  <link rel="stylesheet" href="settings-dialog-css-by-claude.css">
  <style>
    body { font-family: Arial, sans-serif; }
    #open-settings-btn {
      margin: 40px auto;
      display: block;
      padding: 12px 28px;
      font-size: 16px;
      cursor: pointer;
    }
    .demo-status {
      margin: 24px auto;
      max-width: 600px;
      border: 1px solid #e0e0e0;
      background: #fafafb;
      padding: 16px;
      border-radius: 5px;
      font-size: 15px;
      color: #222;
    }
  </style>
</head>
<body>
  <button id="open-settings-btn">Open Settings Dialog</button>
  <div id="settings-output" class="demo-status"></div>

  <script src="settings-dialog-lib-by-claude.js"></script>
  <script>
    const settingsConfig = {
      headerText: "User Settings Example",
      footerText: "Tip: Values are saved to local storage and restored next time.",
      saveButtonText: "Save Settings",
      cancelButtonText: "Close",
      settings: [
        {
          id: "userName",
          labelText: "Name",
          type: "textbox",
          defaultValue: "",
          validationRegex: "^[A-Za-z\\s]{2,30}$",
          errorMessage: "Please enter a valid name (letters and spaces only, 2-30 chars).",
        },
        {
          id: "userPassword",
          labelText: "Password",
          type: "password",
          defaultValue: "",
          validationRegex: "^.{4,}$",
          errorMessage: "Password must be at least 4 characters.",
        },
        {
          id: "newsletterOptIn",
          labelText: "Subscribe to newsletter",
          type: "checkbox",
          defaultValue: "false",
        },
        {
          id: "themeChoice",
          labelText: "Choose Theme",
          type: "radio",
          groupName: "themeGroup",
          defaultValue: "light",
          options: [
            { value: "light", text: "Light" },
            { value: "dark", text: "Dark" },
            { value: "system", text: "System Default" }
          ]
        },
        {
          id: "favoriteColor",
          labelText: "Favorite Color",
          type: "dropdown",
          defaultValue: "blue",
          options: [
            { value: "red", text: "Red" },
            { value: "green", text: "Green" },
            { value: "blue", text: "Blue" },
            { value: "yellow", text: "Yellow" }
          ]
        },
        {
          id: "secondaryEmail",
          labelText: "Secondary Email",
          type: "textbox",
          defaultValue: "",
          validationRegex: "^[\\w-\\.]+@([\\w-]+\\.)+[\\w-]{2,}$",
          errorMessage: "Enter a valid email address.",
          // This field will only be enabled if newsletter is checked
          enabledIf: {
            otherElementId: "newsletterOptIn",
            value: true
          },
        }
      ]
    };

    function displayCurrentSettings() {
      let out = [];
      settingsConfig.settings.forEach(setting => {
        const value = localStorage.getItem(setting.id);
        out.push(`<strong>${setting.labelText}:</strong> ${value === null ? "(none)" : value}<br>`);
      });
      document.getElementById('settings-output').innerHTML = out.join('\n');
    }

    document.getElementById('open-settings-btn').onclick = function () {
      createSettingsDialog(settingsConfig, {
        onOpen: () => { /* optional: dialog just opened */ },
        onSave: () => {
          alert("Settings saved!");
          displayCurrentSettings();
        },
        onChange: (id, value) => {
          // Optional: live update or debug
          // console.log("Changed:", id, value);
        },
        onClose: () => {
          // Optional: clean up
        }
      });
    };

    // Show localStorage values at start
    displayCurrentSettings();
  </script>
</body>
</html>
